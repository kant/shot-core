<section
  data-controller="shot-event"
  data-shot-event-id="<%= event.id %>"
  data-shot-event-project-id="<%= event.project_id %>"
  class="schedule-event section w-100 flex justify-between"
>
  <div class="schedule-event__scene-number flex flex-column">
    <div>Scene</div>
    <div><%= scene.scene_number %></div>
  </div>
  <div class="schedule-event__shot-number flex flex-column">
    <div>Shot</div>
    <div><%= shot.shot_number %></div>
  </div>
  <div class="schedule-event__image flex flex-column">
    <div class="aspect-ratio aspect-ratio--board" style="width:100px;">
      <img
        width="100"
        height="56"
        loading="lazy"
        class="aspect-ratio--object bg-black"
        src="<%= event.thumbnail %>" />
    </div>
  </div>
  <div class="schedule-event__notes flex flex-column w-40">
    <%
      let boards = JSON.parse(shot.boards_json)

      let combinedAction = boards
        .map(board => board.action)
        .filter(Boolean)
        .join(' ')

      let combinedDialogue = boards
        .map(board => board.dialogue)
        .filter(Boolean)
        .join(' ')
    %>

    <% if (combinedAction) { %>
      <div title="<%= combinedAction %>">
        <%= truncate(combinedAction) %>
      </div>
    <% } %>

    <% if (combinedDialogue) { %>
      <div class="pl3" title="<%= combinedDialogue %>">
        <i>“<%= truncate(combinedDialogue) %>”</i>
      </div>
    <% } %>
  </div>
  <div class="flex flex-column">
    <div>Medium, Low Angle</div>
  </div>
  <div class="flex flex-column">
    <div>50mm</div>
    <div>f/5.6</div>
  </div>
  <div class="flex flex-column">
    <div>Dur.</div>
    <div>1:30</div>
  </div>
  <div class="flex flex-column">
    <div>Takes</div>
    <div>5</div>
  </div>
  <div class="flex flex-column">
    <div>
      <a class="link" data-action="click->shot-event#addDayAfter" href="#">Insert Day Below</a>
    </div>
  </div>
</section>
